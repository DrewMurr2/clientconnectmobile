{"version":3,"sources":["/Volumes/Work/Web/clientconnect/Client-Connect-Dashboard/src/app/scheduled-messages/scheduled-messages-routing.module.ts","/Volumes/Work/Web/clientconnect/Client-Connect-Dashboard/src/app/scheduled-messages/scheduled-messages.module.ts","/Volumes/Work/Web/clientconnect/Client-Connect-Dashboard/src/app/scheduled-messages/scheduled-messages/scheduled-message/scheduled-message.component.html","/Volumes/Work/Web/clientconnect/Client-Connect-Dashboard/src/app/scheduled-messages/scheduled-messages/scheduled-message/scheduled-message.component.scss","/Volumes/Work/Web/clientconnect/Client-Connect-Dashboard/src/app/scheduled-messages/scheduled-messages/scheduled-message/scheduled-message.component.ts","/Volumes/Work/Web/clientconnect/Client-Connect-Dashboard/src/app/scheduled-messages/scheduled-messages/scheduled-messages.component.html","/Volumes/Work/Web/clientconnect/Client-Connect-Dashboard/src/app/scheduled-messages/scheduled-messages/scheduled-messages.component.scss","/Volumes/Work/Web/clientconnect/Client-Connect-Dashboard/src/app/scheduled-messages/scheduled-messages/scheduled-messages.component.ts"],"names":[],"mappings":"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","file":"scheduled-messages.module.chunk.js","sourcesContent":["import { RouterModule, Routes } from '@angular/router';\r\n\r\nimport {ScheduledMessagesComponent} from \"./scheduled-messages/scheduled-messages.component\";\r\n\r\n\r\nconst AppRoutes: Routes = [\r\n    { path: '', component: ScheduledMessagesComponent },\r\n\r\n];\r\n\r\nexport const ScheduledMessagesRoutingModule = RouterModule.forChild(AppRoutes);\r\n\n\n\n// WEBPACK FOOTER //\n// /Volumes/Work/Web/clientconnect/Client-Connect-Dashboard/src/app/scheduled-messages/scheduled-messages-routing.module.ts","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ScheduledMessagesComponent } from './scheduled-messages/scheduled-messages.component';\r\nimport { ScheduledMessageComponent } from './scheduled-messages/scheduled-message/scheduled-message.component';\r\nimport {ScheduledMessagesRoutingModule} from \"./scheduled-messages-routing.module\";\r\nimport { SharedModule } from '../shared/shared.module';\r\nimport { ThreadModule } from '../number-threads/thread.module/thread.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n      ScheduledMessagesRoutingModule,\r\n      SharedModule,\r\n      ThreadModule\r\n  ],\r\n  declarations: [ScheduledMessagesComponent, ScheduledMessageComponent]\r\n})\r\nexport class ScheduledMessagesModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// /Volumes/Work/Web/clientconnect/Client-Connect-Dashboard/src/app/scheduled-messages/scheduled-messages.module.ts","module.exports = \"<!-- <div class=\\\"card bg-color-white\\\"  >\\r\\n\\r\\n\\r\\n  <div *ngIf=\\\"message.mediaUrl\\\" class=\\\"mdl-card__title\\\" [ngStyle]=\\\"{'background-image':'url('+message.mediaUrl+')'}\\\"\\r\\n       style=\\\" height: 176px; color: #fff; background-size:cover; background-position:center;\\\">\\r\\n    <h2 class=\\\"mdl-card__title-text\\\"></h2>\\r\\n  </div>\\r\\n\\r\\n\\r\\n  <div class=\\\"card-content\\\">\\r\\n\\r\\n      <span class=\\\"card-title\\\">{{message.sent_to}}</span>\\r\\n    <p>{{message.body}}</p>\\r\\n\\r\\n  </div>\\r\\n  <div class=\\\"card-action\\\">\\r\\n    <div class=\\\"time\\\">\\r\\n\\r\\n      {{messageService.showTime(message, 'future')}}\\r\\n\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n</div> -->\\r\\n\\r\\n<app-thread id=\\\"thread\\\" \\r\\n  [thread]=\\\"message\\\"\\r\\n  [contacts]=\\\"contacts\\\"\\r\\n  [disableReplyFeature]='true'\\r\\n ></app-thread>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Volumes/Work/Web/clientconnect/Client-Connect-Dashboard/src/app/scheduled-messages/scheduled-messages/scheduled-message/scheduled-message.component.html\n// module id = ../../../../../src/app/scheduled-messages/scheduled-messages/scheduled-message/scheduled-message.component.html\n// module chunks = scheduled-messages.module","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Volumes/Work/Web/clientconnect/Client-Connect-Dashboard/src/app/scheduled-messages/scheduled-messages/scheduled-message/scheduled-message.component.scss\n// module id = ../../../../../src/app/scheduled-messages/scheduled-messages/scheduled-message/scheduled-message.component.scss\n// module chunks = scheduled-messages.module","import {Component, Input, OnInit} from '@angular/core';\r\nimport {Message} from \"../../../conversation/message/message\";\r\nimport {MessageService} from \"../../../shared/services/message.service\";\r\nimport { ContactsService } from '../../../shared/services/contacts.service';\r\n\r\n@Component({\r\n  selector: 'app-scheduled-message',\r\n  templateUrl: './scheduled-message.component.html',\r\n  styleUrls: ['./scheduled-message.component.scss']\r\n})\r\nexport class ScheduledMessageComponent implements OnInit {\r\n  @Input('message') message;\r\n  @Input('contacts') contacts;\r\n  \r\n  constructor(\r\n      public messageService: MessageService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    \r\n  }\r\n\r\n  \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// /Volumes/Work/Web/clientconnect/Client-Connect-Dashboard/src/app/scheduled-messages/scheduled-messages/scheduled-message/scheduled-message.component.ts","module.exports = \"<section class=\\\"container-fluid\\\">\\r\\n  <ng-container *ngFor=\\\"let messagesGroup of messagesGroups;\\\">\\r\\n  <br>\\r\\n  <h2 class=\\\"article-title\\\">{{messagesGroup.dateString}}\\r\\n\\r\\n  </h2>\\r\\n  <hr>\\r\\n\\r\\n  <div class=\\\"row\\\">\\r\\n    <div\\r\\n            class=\\\"col-xl-4 col-lg-6 col-thread\\\" *ngFor=\\\"let message of messagesGroup.messages ;let i = index\\\" >\\r\\n      <app-scheduled-message\\r\\n\\r\\n      [contacts]=\\\"contacts\\\"\\r\\n      [message]=\\\"message\\\">\\r\\n    </app-scheduled-message>\\r\\n\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</ng-container>\\r\\n</section>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Volumes/Work/Web/clientconnect/Client-Connect-Dashboard/src/app/scheduled-messages/scheduled-messages/scheduled-messages.component.html\n// module id = ../../../../../src/app/scheduled-messages/scheduled-messages/scheduled-messages.component.html\n// module chunks = scheduled-messages.module","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"app-scheduled-message {\\n  display: block;\\n  margin-bottom: 30px; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Volumes/Work/Web/clientconnect/Client-Connect-Dashboard/src/app/scheduled-messages/scheduled-messages/scheduled-messages.component.scss\n// module id = ../../../../../src/app/scheduled-messages/scheduled-messages/scheduled-messages.component.scss\n// module chunks = scheduled-messages.module","import { Component, OnInit } from '@angular/core';\r\nimport { ApiService } from \"../../shared/services/api.service\";\r\nimport { ContactsService } from '../../shared/services/contacts.service';\r\nimport { Observer } from 'rxjs/Observer';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { WebsocketService } from '../../shared/services/websocket.service';\r\nimport { Message } from '../../conversation/message/message';\r\nimport { GeneralService } from '../../shared/services/general.service';\r\n\r\n@Component({\r\n  selector: 'app-scheduled-messages',\r\n  templateUrl: './scheduled-messages.component.html',\r\n  styleUrls: ['./scheduled-messages.component.scss']\r\n})\r\nexport class ScheduledMessagesComponent implements OnInit {\r\n  messages = [];\r\n  messagesGroups = [];\r\n  contacts = [];\r\n  constructor(\r\n    private apiService: ApiService,\r\n    private websocketService: WebsocketService,\r\n    private generalService: GeneralService\r\n\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loadMessages();\r\n    this.websocketService.messages.delete.subscribe((msg: Message) => {\r\n      this.messagesGroups.forEach((group: any) => {\r\n        const messages: Message[] = group.messages;\r\n          this.generalService.removeObjectFromArrayByKeyValue(messages, 'id', msg.id);\r\n      });\r\n\r\n    });\r\n\r\n  }\r\n\r\n  loadMessages() {\r\n    this.apiService.call('/components/scheduled-messages').subscribe((response: any) => {\r\n      if (response.error == null) {\r\n        this.messages = response.messages;\r\n        this.contacts = response.contacts;\r\n        this.createGroups()\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  createGroups() {\r\n    var dates = this.extractUniqueDatesFromMsgs();\r\n    console.log('Dates:')\r\n    console.log(dates)\r\n    dates.forEach((date, index) => {\r\n\r\n      this.messagesGroups[index] = {\r\n        date: date,\r\n        dateString: new Date(date).toDateString(),\r\n        messages: this.extractMessagesByDate(date)\r\n      }\r\n    });\r\n  }\r\n\r\n  extractUniqueDatesFromMsgs() {\r\n    let dates = [];\r\n    this.messages.map((message: any) => {\r\n      message.schedule_date = message.scheduled_time.split('T')[0];\r\n      if (dates.indexOf(message.schedule_date) < 0) {\r\n        dates.push(message.schedule_date);\r\n      }\r\n\r\n      return message;\r\n    });\r\n    return dates;\r\n  }\r\n\r\n  extractMessagesByDate(date) {\r\n    const messages = this.messages.filter((message: any) => message.schedule_date == date);\r\n    return messages;\r\n  }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// /Volumes/Work/Web/clientconnect/Client-Connect-Dashboard/src/app/scheduled-messages/scheduled-messages/scheduled-messages.component.ts"],"sourceRoot":"webpack:///"}